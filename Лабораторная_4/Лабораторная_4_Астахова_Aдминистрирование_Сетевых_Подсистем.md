**РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ**

> **НАРОДОВ**

**Факультет физико-математических и естественных**

**наук**

**Кафедра теории вероятностей и кибербезопасности**

**Отчет лабораторной работы 4**

**Дисциплина:** Администрирование сетевых подсистем

Студент: Астахова Марина

Группа: НПИбд-02-23

***Тема:*** [Базовая настройка HTTP-сервера Apache]{.underline}

***4***

***.1. Цель работы.***

Приобретение практических навыков по установке и базовому

конфигурированию HTTP-сервера Apache.

***4***

***.2. Выполнение работы***

***1***

***. Установите необходимые для работы HTTP-сервера***

***пакеты. Установка HTTP-сервера.***

Сначала запускаем виртуальную машину с помощью команды vagrant up

server. Так как операционная система Windows, то работаем через far.

*Команда vagrant up server в far*

Установим из репозитория стандартный веб-сервер (HTTP-сервер и

утилиты httpd, криптоутилиты и пр.):

***2***

***. Запустите HTTP-сервер с базовой конфигурацией и***

***проанализируйте его работу. Базовое конфигурирование***

***HTTP-сервера.***

Внесем изменения в настройки межсетевого экрана узла server, разрешив

работу с http:

В дополнительном терминале запустите в режиме реального времени

расширенный лог системных сообщений, чтобы проверить корректность

работы системы:

В первом терминале активировали и запустили HTTP-сервер:

***3***

***. Анализ работы HTTP-сервера***

Результат запроса в client

***4***

***. Настройте виртуальный хостинг. Настройка***

***виртуального хостинга для HTTP-сервера.***

Остановили работу DNS-сервера для внесения изменений в файлы

описания DNS зон:

Добавили запись для HTTP-сервера в конце файла прямой DNS-

зоны /var/named/master/fz/astakhovamd.net:

И в файле 192.168.1

В каталоге /etc/httpd/conf.d создали файлы server.astakhovamd.net.conf и

www.astakhovamd.net.conf:

Открыли на редактирование файл server.astakhovamd.net.conf и внесли

следующее содержание:

Открыли на редактирование файл www.astakhovamd.net.conf и внесли

следующее содержание:

Перейдем в каталог /var/www/html, в котором должны находиться файлы с

содержимым (контентом) веб-серверов, и создадим тестовые страницы для

виртуальных веб-серверов server.astakhovamd.net и www.astakhovamd.net.

Для виртуального веб-сервера server.astakhovamd.net:

Открыли на редактирование файл index.html и внесли следующее

содержание: Welcome to the server.аstakhovamd.net.server.

Скорректировали права доступа в каталог с веб-контентом и восстановили

контекст безопасности, и перезапустили сервер:

***5***

***. Напишите скрипт для Vagrant, фиксирующий действия по***

***установке и настройке HTTP-сервера во внутреннем***

***окружении виртуальной машины server.***

***Соответствующим образом внесите изменения в Vagrantfile.***

***Внесение изменений в настройки внутреннего окружения***

***виртуальной машины.***

На виртуальной машине server перешли в каталог для внесения изменений

в настройки внутреннего окружения /vagrant/provision/server/, создали в

нём каталог http, в который поместили в соответствующие подкаталоги

конфигурационные файлы HTTP-сервера:

Заменили конфигурационные файлы DNS-сервера:

В каталоге /vagrant/provision/server создайте исполняемый файл http.sh:

Для отработки созданного скрипта во время загрузки виртуальных машин

в конфигурационном файле Vagrantfile добавляем в конфигурации сервера

следующую запись:

***4***

***.3. Итог работы***

Приобрели практические навыки по установке и базовому

конфигурированию HTTP-сервера Apache.

***4***

***.4. Контрольные вопросы***

***Через какой порт по умолчанию работает Apache?***

A. ***Порт 80 (HTTP):*** Это стандартный порт для незашифрованного

> веб-трафика (Hypertext Transfer Protocol). Apache слушает этот порт
>
> по умолчанию для обработки обычных HTTP-запросов.

B. ***Порт 443 (HTTPS):*** Если Apache настроен для работы с SSL/TLS

> (то есть для защищенного соединения HTTPS - Hypertext Transfer
>
> Protocol Secure), то он будет слушать порт 443.

***Под каким пользователем запускается Apache и к какой***

***группе относится этот пользователь?***

> Apache разработан для работы с минимальными привилегиями из

соображений безопасности. Он запускается как root только для того,

чтобы привязаться к портам ниже 1024 (например, 80 и 443), а затем

переключается на непривилегированного пользователя для обработки

запросов.

Имя пользователя и группы зависят от дистрибутива Linux:

1

2

3

4

5

6

. На Debian/Ubuntu:

. Пользователь: www-data

. Группа: www-data

. На RHEL/CentOS/Fedora:

. Пользователь: apache

. Группа: apache

***Зачем это нужно?***

Если злоумышленник скомпрометирует веб-сервер, работающий под

непривилегированным пользователем, его возможности будут сильно

ограничены. Он не сможет получить полный контроль над системой или

получить доступ к файлам, принадлежащим root или другим

пользователям.

***Где располагаются лог-файлы веб-сервера? Что можно по***

***ним отслеживать?***

Лог-файлы Apache очень важны для мониторинга, отладки и анализа

работы веб-сервера.

Расположение по умолчанию:

1

2

. На Debian/Ubuntu: /var/log/apache2/

. На RHEL/CentOS/Fedora: /var/log/httpd/

***Примечание:*** для каждого VirtualHost могут быть настроены свои

собственные файлы логов.

Основные типы лог-файлов и что по ним можно отслеживать:

***1***

***. access.log (или access_log):***

1

. ***Что отслеживает:***

1

. Все входящие запросы к веб-серверу.

***2***

***. Содержит информацию о:***

1

2

3

4

. IP-адрес клиента, сделавшего запрос.

. Дата и время запроса.

. Метод запроса (GET, POST и т.д.) и запрашиваемый URL.

. Код состояния HTTP (200 OK, 404 Not Found, 500 Internal

> Server Error и т.д.).

5

6

7

8

. Размер ответа в байтах.

. Referer (URL, с которого пришел пользователь).

. User-Agent (информация о браузере/ОС клиента).

. Время обработки запроса.

2

.8.1.

Для чего используется:

2

2

2

.8.1.1.

Анализ трафика

Поведенческий анализ пользователей

Выявление проблем с доступностью

.8.1.2.

.8.1.3.

контента

2

.8.1.4.

Мониторинг производительности.

***3***

***. error.log (или error_log):***

1

. **Что отслеживает:** Ошибки, предупреждения и

> диагностические сообщения, возникающие на стороне
>
> сервера.

**2**

**. Содержит информацию о:**

3

.2.1.

> Internal Server Error).

Внутренние ошибки сервера (например, 500

3

3

.2.2.

Проблемы с конфигурацией Apache.

Ошибки при обработке скриптов (например, PHP-

.2.3.

ошибки, если используется mod_php).

3

3

.2.4.

.2.5.

Проблемы с правами доступа к файлам.

Несуществующие файлы, к которым был запрос.

3

. **Для чего используется:**

3

3

3

.3.1.

.3.2.

.3.3.

Отладка проблем сервера

Выявление уязвимостей

Мониторинг стабильности работы.

4

. **Другие логи:** Могут быть специфические логи для SSL, перезаписи

URL (mod_rewrite) и т.д, если они настроены.
