**РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ**

> **НАРОДОВ**

**Факультет физико-математических и естественных**

**наук**

**Кафедра теории вероятностей и кибербезопасности**

**Отчет лабораторной работы 7**

**Дисциплина:** Администрирование сетевых подсистем

Студент: Астахова Марина

Группа: НПИбд-02-23

***Тема: Расширенные настройки межсетевого***

> ***экрана***

***7***

***.1. Цель работы.***

Получить навыки настройки межсетевого экрана в Linux в части

переадресации портов и настройки Masquerading.

***7***

***.2. Выполнение работы***

*1*

*. Настройте межсетевой экран виртуальной машины server*

*для доступа к серверу по протоколу SSH не через22-й порт, а*

*через порт 2022. Создание пользовательской службы firewalld.*

Обновили порты и заменили на порт 2022

Проверили после этого доступ в интернет с client

Добавили в службы FirewallD и сделали доступным в реальном времени

*2*

*. Настройте маскарадинг на виртуальной машине server для*

*организации доступа клиента к сети Интернет. Настройка*

*Port Forwarding и Masquerading.*

*3*

*. Напишите скрипт для Vagrant, фиксирующий действия по*

*расширенной настройке межсетевого экрана.*

*Соответствующим образом внести изменения в Vagrantfile.*

*Внесение изменений в настройки внутреннего окружения*

*виртуальной машины*

Создаем файл firewall.sh в каталоге

Добавляем в файл скрипт

В vagrantfile добавляем изменения для закрепления изменений

***7***

***.3. Итог работы***

Были получены навыки настройки межсетевого экрана в Linux в

части переадресации портов и настройки Masquerading.

***7***

***.4. Контрольные вопросы***

*1*

*2*

*. Где хранятся пользовательские файлы firewalld?*

Пользовательские файлы конфигурации firewalld (например, для

пользовательских зон, служб, политик) хранятся в директории

/

etc/firewalld/.

***i. Пользовательские зоны: /etc/firewalld/zones/***

***ii. Пользовательские службы: /etc/firewalld/services/***

*. Какую строку надо включить в пользовательский файл*

*службы, чтобы указать порт TCP 2022?*

В XML-файл пользовательской службы (например,

mycustomservice.xml), внутри тегов \..., нужно добавить следующую

строку:

**\<**

**port protocol=\"tcp\" port=\"2022\"/\>**

*3*

*4*

*. Какая команда позволяет вам перечислить все службы,*

*доступные в настоящее время на вашем сервере?*

Для перечисления всех доступных служб firewalld используется

команда:

**firewall-cmd \--get-services**

*. В чем разница между трансляцией сетевых адресов (NAT)*

*и маскарадингом (masquerading)?*

***NAT (Network Address Translation)*** --- это общий термин для

технологии, которая изменяет IP-адреса и/или номера портов в

заголовках IP-пакетов при их прохождении через маршрутизатор

или брандмауэр.

*Существуют два основных типа:*

1

2

. **SNAT (Source NAT):** Изменяет исходный IP-адрес пакета.

. **DNAT (Destination NAT):** Изменяет IP-адрес назначения пакета.

Маскарадинг --- это динамический SNAT, который автоматически

определяет внешний IP-адрес для исходящих соединений. NAT ---

это более широкое понятие, включающее как статические, так и

динамические преобразования адресов, а также преобразования

адресов назначения.

*5*

*. Какая команда разрешает входящий трафик на порт 4404*

*и перенаправляет его в службу ssh по IP-адресу 10.0.0.10?*

▪

***sudo firewall-cmd \--zone=public \--add-forward***

***port=port=4404:proto=tcp:toport=22:toaddr=10.0.0.10 \--permanent***

***sudo firewall-cmd --reload***

▪

*6*

*. Какая команда используется для включения маскарадинга*

*IP-пакетов для всех пакетов, выходящих в зону public?*

▪

▪

***sudo firewall-cmd \--zone=public \--add-masquerade \--permanent***

***sudo firewall-cmd \--reload***
