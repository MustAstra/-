**РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ**

> **НАРОДОВ**

**Факультет физико-математических и естественных**

**наук**

**Кафедра теории вероятностей и кибербезопасности**

**Отчет лабораторной работы 15**

**Дисциплина:** Администрирование сетевых подсистем

Студент: Астахова Марина

Группа: НПИбд-02-23

***Тема:*** Настройка сетевого журналирования.

***1***

***5.1. Цель работы.***

Получение навыков по работе с журналами системных событий.

***1***

***5.2. Выполнение работы.***

**1**

**5.2.1. Настройка сервера сетевого журнала**

1

.На сервере создаем файл конфигурации сетевого хранения журналов:

2

. В файле конфигурации /etc/rsyslog.d/netlog-server.conf включим приём

записей журнала по TCP-порту 514:

3

. Перезапустим службу rsyslog и посмотрим порты, связанные с rsyslog,

прослушиваются:

4

. На сервере настроим межсетевой экран для приёма сообщений по TCP-

порту 514:

**1**

**5.2.2. Настройка клиента сетевого журнала**

1

. На клиенте создаем файл конфигурации сетевого хранения журналов:

2

. На клиенте в файле конфигурации /etc/rsyslog.d/netlog-

client.conf включим перенаправление сообщений журналана 514

TCP-порт сервера

3

. Перезапустим службу rsyslog

**1**

**5.2.3. Просмотр журнала**

1

. На сервере просмотрим один из файлов журнала

2

. На сервере под пользователем запустим графическую

программу для просмотра журналов:

3

.На сервере установим просмотрщик журналов системных

сообщений lnav или его аналог:

4

. Просмотрим логи с помощью lnav или его аналога:

**1**

**5.2.4. Внесение изменений в настройки внутреннего**

**окружения виртуальных машин**

1

. На виртуальной машине server перейдем в каталог для внесения

изменений в настройки внутреннего окружения /vagrant/provision/server/,

создаем в нём каталог netlog, в котором поместим в соответствующие

подкаталоги конфигурационные файлы и создадим файл.

2

3

. То же самое делаем для client

. В данном файле пропишем скрипт:

4

. То же самое для client

5

. Внесем изменения в vagrantfile

***1***

***5.3. Итог работы.***

В ходе выполнение лабораторной работы были получены навыки работы с

системным журналом

***1***

***5.4. Контрольные вопросы***

**1**

**. Какой модуль rsyslog вы должны использовать для приёма**

**сообщений от journald?**

Модуль imjournal. Это современный модуль для приёма сообщений из

systemd journal.

**2**

**. Как называется устаревший модуль, который можно**

**использовать для включения приёма сообщений журнала в**

**rsyslog?**

Модуль imuxsock. Это устаревший модуль, который читал сообщения из

Unix-сокета /dev/log.

**3**

**. Чтобы убедиться, что устаревший метод приёма сообщений из**

**journald в rsyslog не используется, какой дополнительный параметр**

**следует использовать?**

Параметр \$OmitLocalLogging off (или установка в on для полного

отключения).

**4**

**. В каком конфигурационном файле содержатся настройки,**

**которые позволяют вам настраивать работу журнала?**

Основной файл: /etc/systemd/journald.conf

**5**

**. Каким параметром управляется пересылка сообщений из**

**journald в rsyslog?**

Параметр ForwardToSyslog в файле /etc/systemd/journald.conf.

**6**

**. Какой модуль rsyslog вы можете использовать для**

**включения сообщений из файла журнала, не созданного**

**rsyslog?**

Модуль imfile. Он позволяет мониторить любые текстовые файлы.

**7**

**. Какой модуль rsyslog вам нужно использовать для**

**пересылки сообщений в базу данных MariaDB?**

Модуль ommysql (output module for MySQL/MariaDB).

**8**

**. Какие две строки вам нужно включить в rsyslog.conf,**

**чтобы позволить текущему журнальному серверу получать**

**сообщения через TCP?**

\$

\$

ModLoad imtcp

InputTCPServerRun 514

**9**

**. Как настроить локальный брандмауэр, чтобы разрешить**

**приём сообщений журнала через порт TCP 514?**

Добавить службу syslog (порты 514/udp и 514/tcp)
