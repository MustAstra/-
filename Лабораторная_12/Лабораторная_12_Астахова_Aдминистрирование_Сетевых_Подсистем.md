**РОССИЙСКИЙ УНИВЕРСИТЕТ ДРУЖБЫ**

> **НАРОДОВ**

**Факультет физико-математических и естественных**

**наук**

**Кафедра теории вероятностей и кибербезопасности**

**Отчет лабораторной работы 12**

**Дисциплина:** Администрирование сетевых подсистем

Студент: Астахова Марина

Группа: НПИбд-02-23

***Тема:* Синхронизация времени**

***1***

***2.1. Цель работы.***

Получение навыков по управлению системным временем и настройке

синхронизации времени.

***1***

***2.2. Выполнение работы***

**1**

**2.2.1. Настройка параметров времени**

На сервере и клиенте посмотрю параметры настройки даты и времени:

На сервере и клиенте посмотрим текущее системное время:

**1**

**2.2.2. Управление синхронизацией времени**

Проверю источник времени на клиенте и сервере:

На сервере открываю на редактирование файл /etc/chrony.conf и добавляю

строку:

Перезапущу службу:

Настраиваю межсетевой экран на сервере:

На клиенте открываю файл /etc/chrony.conf и добавляю строку:

Проверяю источники времени на клиенте и на сервере:

**1**

**2.2.3. Внесение изменений в настройки внутреннего**

**окружения виртуальных машин**

Добавляю изменения в vagrantfile и завожу файл ntp.sh

***1***

***2.3. Итог работы***

В ходе лабораторной работы были успешно получены и отработаны

практические навыки управления системным временем в Linux-системах,

с акцентом на настройке и обслуживании служб синхронизации времени.

Результаты работы включают:

**1**

**. Освоение фундаментальных принципов синхронизации**

**времени:**

Понята критическая важность точного времени для работы

распределённых систем, баз данных и служб аутентификации.

Изучена иерархическая модель NTP (страты 0-15) и её влияние на

надёжность источников времени.

**2**

**. Практическая настройка chrony в RHEL/CentOS 7:**

1

2

. Освоена работа со службой chronyd как стандартным инструментом

синхронизации времени.

. Отработана настройка конфигурационного файла /etc/chrony.conf:

a\. Добавление внешних NTP-серверов.

b\. Настройка сервера времени для локальной сети с директивой

local stratum 10.

c\. Определение сетей, которым разрешена синхронизация

(allow).

**3**

**. Управление сетевыми настройками для NTP:**

1

2

. Настроено открытие порта 123/UDP в брандмауэре (firewalld) для

работы в качестве NTP-сервера.

. Отработаны команды управления службой:

*а. systemctl enable chronyd*

*б. systemctl restart chronyd*

*в. firewall-cmd \--add-service=ntp \--permanent*

**4**

**. Диагностика и мониторинг синхронизации:**

Освоено использование утилиты chronyc для:

1

2

. Просмотра текущих источников (chronyc sources -v).

. Проверки статуса синхронизации (chronyc tracking).

3

> . Анализа статистики (chronyc sourcestats).

Навык интерпретации вывода:

1

> . Определение страты

2

> . Смещения времени

3

. Задержки и стабильности источников.

**5**

**. Решение проблем синхронизации:**

1

2

3

. Отработаны методы диагностики при недоступности внешних

NTP-серверов.

. Настроена работа в автономном режиме с использованием

локальных часов.

. Изучены признаки рассинхронизации и методы её устранения.

**6**

**. Интеграция с инфраструктурой безопасности:**

1

> . Понята взаимосвязь точного времени с работой Kerberos,

SSL-сертификатов и систем аудита.

2

. Освоена настройка времени как базового требования для

безопасной работы сетевых служб.

***1***

***2.4. Контрольные вопросы***

**1**

**. Почему важна точная синхронизация времени для служб**

**баз данных?**

Точная синхронизация времени критически важна для служб баз данных по

нескольким

причинам.

**Во-первых,** распределённые базы данных и системы репликации

используют временные метки для упорядочивания транзакций и

разрешения конфликтов. Если серверы имеют рассинхронизацию времени,

это может привести к потере данных, нарушению консистентности и

некорректной

работе

механизмов

репликации.

**Во-вторых,** журналирование событий и аудит полагаются на точные

временные метки для расследования инцидентов и анализа логов.

**В-третьих,**

многие

протоколы

аутентификации

> зависят

и

авторизации,

> времени.

используемые

базами

данных,

от

В системах с кластеризацией рассинхронизация даже в несколько секунд

может вызвать сбои в работе кластера и привести к простою всей системы.

**2**

**. Почему служба проверки подлинности Kerberos сильно**

**зависит от правильной синхронизации времени?**

Kerberos использует временные метки в своих билетах (tickets) для защиты

от атак повторного воспроизведения (replay attacks). Каждый билет имеет

время начала действия и время истечения, обычно в пределах 5--10 минут.

Если время на клиенте и сервере Kerberos расходится более чем на

установленный лимит (обычно 5 минут), аутентификация завершится

ошибкой. Это происходит потому, что сервер не сможет верифицировать

актуальность временной метки в запросе клиента.

Таким образом, синхронизация времени является фундаментальным

требованием для работы инфраструктуры Kerberos, и без неё

централизованная аутентификация в домене станет невозможной.

**3**

**. Какая служба используется по умолчанию для**

**синхронизации времени на RHEL 7?**

На Red Hat Enterprise Linux 7 по умолчанию используется служба chronyd

(реализация chrony).

Она заменила устаревший ntpd, начиная с RHEL 7, и предоставляет более

быструю синхронизацию, лучшую работу в условиях нестабильного

сетевого соединения и поддержку изолированных сетей.

**4**

**. Какова страта по умолчанию для локальных часов?**

Страта (stratum) по умолчанию для локальных часов, когда они не

синхронизируются с внешними источниками, обычно имеет значение 10.

> В иерархии NTP страта 0 присваивается атомным часам или GPS-

приёмникам, страта 1 --- серверам, напрямую подключённым к

источникам страты 0, и так далее.

Страта 10 обычно указывает на то, что источник времени является

локальными часами системы и не считается надёжным для синхронизации

других устройств.

**5**

**. Какой порт брандмауэра должен быть открыт, если вы**

**настраиваете свой сервер как одноранговый узел NTP?**

Для работы в качестве NTP-сервера или однорангового узла необходимо

открыть порт 123/UDP. Именно через этот порт происходит обмен NTP-

пакетами между серверами и клиентами.

Если сервер только получает время от других источников и не

предоставляет его другим, этот порт можно закрыть.

**6**

**. Какую строку вам нужно включить в конфигурационный**

**файл chrony, если вы хотите быть сервером времени, даже**

**если внешние серверы NTP недоступны?**

В конфигурационный файл /etc/chrony.conf необходимо добавить

директиву:

**local stratum 10**

Эта строка указывает chronyd использовать локальные системные часы в

качестве источника времени с уровнем страты 10, если все настроенные

внешние NTP-серверы становятся недоступными.

Это предотвращает остановку службы времени и позволяет локальной

сети продолжать синхронизацию с этим сервером.

**7**

**. Какую страту имеет хост, если нет текущей синхронизации**

**времени NTP?**

Если хост не синхронизируется ни с какими NTP-серверами и не имеет

настроенной локальной страты, его статус обычно отображается как не

синхронизированный или имеет страту 16.

Значение страты 16 в NTP означает, что источник времени считается

ненадёжным и непригодным для использования.

**8**

**. Какую команду вы бы использовали на сервере с chrony,**

**чтобы узнать, с какими серверами он синхронизируется?**

Для просмотра информации о текущих источниках синхронизации в

chrony используется команда:

**chronyc sources --v**

Ключ -v добавляет подробный вывод.

Эта команда показывает все настроенные NTP-серверы, их статус, страту,

расхождения времени и другие параметры синхронизации.

**9**

**. Как вы можете получить подробную статистику текущих**

**настроек времени для процесса chrony вашего сервера?**

Для получения подробной статистики используется команда:

**chronyc tracking**

Эта команда отображает:















Ссылочный ID текущего источника времени

Страту

Корекцию времени (time offset)

Скорость дрейфа часов (frequency drift)

Точность (precision)

Корневое расхождение (root dispersion)

Корневую задержку (root delay)
